<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cilok Goang Teh Desi ‚Äî Pesan Online</title>
  <style>
    /* ... semua style anda tetap sama persis ... */
  </style>
</head>
<body>

<header>
  <div class="brand">
    <img class="logo" src="logocilok.png" alt="Logo Cilok">
    <div>
      <h1>Cilok Goang Teh Desi</h1>
      <p>Rasa Juara, Pedasnya Bikin Nagih!</p>
    </div>
  </div>
</header>

<div class="container">

  <!-- Banner Promo Desktop -->
  <div class="banner-desktop">
    <img src="cilok bumbu kacang.png" alt="Promo Spesial Desktop">
  </div>

  <!-- Banner Promo Mobile -->
  <div class="banner-mobile">
    <img src="cilok bumbu kacang.png" alt="Promo Spesial Mobile">
  </div>

  <!-- Menu -->
  <section>
    <h2 style="color:var(--primary);text-align:center;margin-top:18px">Menu Unggulan</h2>
    <div class="menu" id="menuList">
      <!-- Item akan di-render lewat JS -->
    </div>
  </section>

  <!-- Download -->
  <div class="download">
    <a class="btn-download" href="menu.pdf" download>üì• Download Menu (PDF)</a>
  </div>

  <!-- Platform links -->
  <section style="text-align:center">
    <h2 style="color:var(--primary)">Pesan di Platform Favorit</h2>
    <div class="platforms">
      <a href="https://gofood.co.id/bandung/restaurant/cilok-goang-teh-desi-cimahi-bdf5f39f-21b7-4f84-8c38-33deeed7b509" target="_blank"><img src="gofood.jpg" alt="GoFood"></a>
      <a href="https://food.grab.com/id/id/restaurant/sample" target="_blank"><img src="grab.jpg" alt="GrabFood"></a>
      <a href="https://shopee.co.id/universal-link/food/shop/sample" target="_blank"><img src="shopee.jpg" alt="ShopeeFood"></a>
    </div>
  </section>

  <!-- QRIS & Bank -->
  <section class="qris">
    <h2 style="color:var(--primary)">Metode Pembayaran</h2>
    <p>Scan QRIS atau transfer melalui bank</p>
    <img src="qris-cilokgoang.jpg" alt="QRIS Cilok Goang Teh Desi" width="260">
    <p>Scan QR di atas untuk bayar langsung via QRIS üì±</p>
    <div class="bank-logos">
      <img src="bca.png" alt="BCA">
      <img src="bni.png" alt="BNI">
    </div>
  </section>

  <!-- Ongkir -->
  <section class="ongkir">
    <h2 style="color:var(--primary)">Cek Ongkir Pengantaran</h2>

    <p class="info">
      üí° <b>Cara cek jarak:</b><br>
      1Ô∏è‚É£ Buka aplikasi <b>Google Maps</b> atau <b>Waze</b>.<br>
      2Ô∏è‚É£ Ketik <b>"Cilok Goang Teh Desi"</b> di kolom pencarian.<br>
      3Ô∏è‚É£ Pilih menu <b>Rute</b> dan masukkan alamat rumah kamu.<br>
      4Ô∏è‚É£ Lihat jarak dalam satuan <b>km</b> dari rumah ke gerai.<br><br>
      Setelah tahu jaraknya, masukkan angkanya di kolom cek ongkir untuk menghitung ongkir otomatis üöö
    </p>

    <p>Masukkan jarak dari lokasi kami (km):</p>
    <input id="jarakInput" type="number" placeholder="contoh: 6" min="0">
    <button onclick="hitungOngkir()">Hitung</button>
    <p id="hasilOngkir"></p>
  </section>
</div>

<!-- Cart floating button -->
<div class="cart-float" id="cartBtn" title="Lihat Keranjang">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M6 6h15l-1.68 8.39A2 2 0 0 1 17.36 16H8.64a2 2 0 0 1-1.96-1.61L5 2H2" stroke="#333" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
  <div class="badge" id="cartCount">0</div>
</div>

<!-- Cart panel -->
<div class="cart-panel" id="cartPanel" aria-hidden="true">
  <h3>Keranjang Anda</h3>
  <div id="cartItems"></div>
  <div class="cart-summary" id="cartTotal">Total: Rp0</div>
  <div class="cart-actions">
    <button class="btn-clear" id="clearCart">Kosongkan</button>
    <button class="btn-checkout" id="checkoutBtn">Checkout via WhatsApp</button>
  </div>
</div>

<!-- Modal Checkout -->
<div id="checkoutModal" class="modal">
  <div class="modal-content">
    <span class="close-button" id="modalClose">&times;</span>
    <h3>Pilih Metode Pembayaran</h3>
    <form id="paymentForm">
      <label><input type="radio" name="paymentMethod" value="Transfer" checked> Transfer Bank</label><br>
      <label><input type="radio" name="paymentMethod" value="QRIS"> QRIS</label><br><br>
      <div id="paymentInfo" style="margin-top:12px;"></div>
      <button type="submit">Konfirmasi Pembayaran</button>
    </form>
  </div>
</div>

<!-- Floating WhatsApp contact -->
<a class="whatsapp-float" href="https://wa.me/6281212629516" target="_blank" title="Chat Teh Desi">
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WA" style="width:50px;height:50px">
</a>

<script>
  const MENU = [
    { id: 'm1', name: 'Paket Hemat 1', price: 27000, img:'images/placeholder_menu.jpg' },
    { id: 'm2', name: 'Paket Hemat 2', price: 27000, img:'images/placeholder_menu.jpg' },
    { id: 'm3', name: 'Paket Hemat 3', price: 25000, img:'images/placeholder_menu.jpg' },
    { id: 'm4', name: 'Cilok Goang Tulang', price: 17000, img:'images/placeholder_menu.jpg' },
    { id: 'm5', name: 'Cilok Goang Tofu Sehah', price: 16000, img:'images/placeholder_menu.jpg' },
    { id: 'm6', name: 'Cilok Granat', price: 14000, img:'images/placeholder_menu.jpg' },
    { id: 'm7', name: 'Cilok Goang Sambal Ijo', price: 14000, img:'images/placeholder_menu.jpg' },
    { id: 'm8', name: 'Cilok Goang Ceker Sambal Ijo', price: 17000, img:'images/placeholder_menu.jpg' },
    { id: 'm9', name: 'Cilok Kuah Boncabe', price: 16000, img:'images/placeholder_menu.jpg' },
    { id: 'm10', name: 'Mie Cilok Goang', price: 16000, img:'images/placeholder_menu.jpg' },
    { id: 'm11', name: 'Cilok Goang Ceker Pedas', price: 18000, img:'images/placeholder_menu.jpg' },
    { id: 'm12', name: 'Cilok Kuah Endolita', price: 14000, img:'images/placeholder_menu.jpg' },
    { id: 'm13', name: 'Seblak Kerupuk Endolita', price: 16000, img:'images/placeholder_menu.jpg' },
    { id: 'm14', name: 'Seblak Mie kuah Telur Pedas', price: 14000, img:'images/placeholder_menu.jpg' },
    { id: 'm15', name: 'Seblok Endolita', price: 13500, img:'images/placeholder_menu.jpg' },
    { id: 'm16', name: 'Seblok Ceker Endolita', price: 17000, img:'images/placeholder_menu.jpg' },
    { id: 'm17', name: 'Seblak Kerupuk Rafael', price: 17000, img:'images/placeholder_menu.jpg' },
    { id: 'm18', name: 'seblak 4 Varian', price: 17000, img:'images/placeholder_menu.jpg' },
    { id: 'm19', name: 'Seblak 5 Varian', price: 19000, img:'images/placeholder_menu.jpg' },
    { id: 'm20', name: 'Seblak 6 Varian', price: 22000, img:'images/placeholder_menu.jpg' },
    { id: 'm21', name: 'Cilok Goreng Asin Keju', price: 15000, img:'images/placeholder_menu.jpg' },
    { id: 'm22', name: 'Cilok Goreng Keju Balado', price: 15000, img:'images/placeholder_menu.jpg' },
    { id: 'm23', name: 'Cilok Goreng Jagung Bakar', price: 15000, img:'images/placeholder_menu.jpg' },
    { id: 'm24', name: 'CIGO Cilok Goang Setan Merah', price: 15000, img:'images/placeholder_menu.jpg' },
    { id: 'm25', name: 'Cilok Goreng Manis Pedas', price: 15000, img:'images/placeholder_menu.jpg' },
    { id: 'm26', name: 'Cilok Goreng Asin Pedas', price: 14000, img:'images/placeholder_menu.jpg' },
    { id: 'm27', name: 'Cilok GOANG Sambal Ijo', price: 15000, img:'images/placeholder_menu.jpg' },
    { id: 'm28', name: 'Cilok Bumbu Kacang Lumer', price: 14000, img:'images/placeholder_menu.jpg' },
    { id: 'm29', name: 'Cilok Goreng Telur Puyuh', price: 15000, img:'images/placeholder_menu.jpg' },
    { id: 'm30', name: 'Cilok Goreng Crispy', price: 15000, img:'images/placeholder_menu.jpg' },
    { id: 'm31', name: 'Rujak Cireng', price: 14000, img:'images/placeholder_menu.jpg' },
    { id: 'm32', name: 'Cireng Bumbu Kacang', price: 15000, img:'images/placeholder_menu.jpg' },
    { id: 'm33', name: 'Cireng Isi Ayam Suir', price: 15000, img:'images/placeholder_menu.jpg' },
    { id: 'm34', name: 'Cireng Bajur Mantul', price: 14000, img:'images/placeholder_menu.jpg' },
    { id: 'm35', name: 'Cilok Goang INSTAN KOMPLIT', price: 17000, img:'images/placeholder_menu.jpg' },
    { id: 'm36', name: 'Cilik GOANG Sambal Ijo', price: 15000, img:'images/placeholder_menu.jpg' },
    { id: 'm37', name: 'Cilik GOANG Sambal Ijo', price: 15000, img:'images/placeholder_menu.jpg' }, // Bisa ditambah lg jika perlu
  ];

  let cart = JSON.parse(localStorage.getItem('cg_cart') || '[]');
  const rupiah = n => 'Rp' + n.toLocaleString('id-ID');

  const menuList = document.getElementById('menuList'),
        cartBtn = document.getElementById('cartBtn'),
        cartPanel = document.getElementById('cartPanel'),
        cartItemsEl = document.getElementById('cartItems'),
        cartTotalEl = document.getElementById('cartTotal'),
        checkoutBtn = document.getElementById('checkoutBtn'),
        modal = document.getElementById('checkoutModal'),
        closeModalBtn = document.getElementById('modalClose'),
        paymentForm = document.getElementById('paymentForm'),
        paymentInfoDiv = document.getElementById('paymentInfo');

  function renderMenu() {
    menuList.innerHTML = '';
    MENU.forEach(item => {
      const div = document.createElement('div');
      div.className = 'card';
      div.innerHTML = `
        <img src="${item.img}" alt="${item.name}">
        <h3>${item.name}</h3>
        <div class="price">${rupiah(item.price)}</div>
        <button onclick="addToCart('${item.id}')">Tambah ke Keranjang üõí</button>
      `;
      menuList.appendChild(div);
    });
  }

  function saveCart() {
    localStorage.setItem('cg_cart', JSON.stringify(cart));
    renderCartCount();
  }

  function renderCartCount() {
    const count = cart.reduce((sum, i) => sum + i.qty, 0);
    document.getElementById('cartCount').textContent = count;
  }

  function renderCartPanel() {
    cartItemsEl.innerHTML = '';
    if (cart.length === 0) {
      cartItemsEl.innerHTML = '<p style="padding:8px;color:#666">Keranjang masih kosong.</p>';
      cartTotalEl.textContent = 'Total: Rp0';
      renderCartCount();
      saveCart();
      return;
    }
    let total = 0;
    cart.forEach((it, idx) => {
      const sub = it.price * it.qty;
      total += sub;
      const node = document.createElement('div');
      node.className = 'cart-item';
      node.innerHTML = `
        <div class="name">${it.name}</div>
        <div style="min-width:110px;text-align:right">
          <div style="font-weight:600">${rupiah(it.price)}</div>
          <div class="qty" style="margin-top:6px;justify-content:flex-end">
            <button class="small" onclick="changeQty(${idx}, -1)">-</button>
            <span style="padding:0 8px">${it.qty}</span>
            <button class="small" onclick="changeQty(${idx}, 1)">+</button>
            <button class="small" style="margin-left:8px;background:#ff5252;color:#fff" onclick="removeItem(${idx})">Hapus</button>
          </div>
        </div>
      `;
      cartItemsEl.appendChild(node);
    });
    cartTotalEl.textContent = `Total: ${rupiah(total)}`;
    renderCartCount();
    saveCart();
  }

  function addToCart(id) {
    const menuItem = MENU.find(m => m.id === id);
    if (!menuItem) return;
    const found = cart.find(c => c.id === id);
    if (found) found.qty++;
    else cart.push({ id: menuItem.id, name: menuItem.name, price: menuItem.price, qty: 1 });
    saveCart();
    renderCartPanel();
    showCartPanel();
  }

  function changeQty(index, delta) {
    cart[index].qty += delta;
    if (cart[index].qty <= 0) cart.splice(index, 1);
    renderCartPanel();
  }

  function removeItem(index) {
    cart.splice(index, 1);
    renderCartPanel();
  }

  function showCartPanel() {
    renderCartPanel();
    cartPanel.style.display = 'block';
    cartPanel.setAttribute('aria-hidden', 'false');
  }

  cartBtn.addEventListener('click', () => {
    if (cartPanel.style.display === 'block') cartPanel.style.display = 'none';
    else showCartPanel();
  });

  document.getElementById('clearCart').addEventListener('click', () => {
    if (confirm('Kosongkan keranjang?')) {
      cart = [];
      saveCart();
      renderCartPanel();
      cartPanel.style.display = 'none';
    }
  });

  checkoutBtn.addEventListener('click', e => {
    e.preventDefault();
    if (cart.length === 0) {
      alert('Keranjang kosong ‚Äî tambahkan menu dulu.');
      return;
    }
    modal.style.display = 'block';
    updatePaymentInfo();
  });

  closeModalBtn.addEventListener('click', () => {
    modal.style.display = 'none';
  });

  window.addEventListener('click', event => {
    if (event.target === modal) {
      modal.style.display = 'none';
    }
  });

  function updatePaymentInfo() {
    const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
    if (paymentMethod === 'Transfer') {
      paymentInfoDiv.innerHTML = `
        <p>Transfer ke Rekening BCA:</p>
        <p><strong>1390997651</strong> a/n Desirusmianti</p>
      `;
    } else if (paymentMethod === 'QRIS') {
      paymentInfoDiv.innerHTML = `
        <p>Scan QRIS di bawah ini untuk pembayaran:</p>
        <img src="qris-cilokgoang.jpg" alt="QRIS Cilok Goang" style="width:220px; border-radius:8px;" />
      `;
    } else {
      paymentInfoDiv.innerHTML = '';
    }
  }

  paymentForm.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
    radio.addEventListener('change', updatePaymentInfo);
  });

  paymentForm.addEventListener('submit', e => {
    e.preventDefault();
    const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
    alert(`Pembayaran dipilih: ${paymentMethod}\nTerima kasih atas pesanannya!`);
    modal.style.display = 'none';

    let pesan = `Halo Teh Desi\n\nSaya mau pesan:\n`;
    let total = 0;
    cart.forEach(it => {
      const sub = it.price * it.qty;
      total += sub;
      pesan += `- ${it.name} x${it.qty} = Rp${sub.toLocaleString('id-ID')}\n`;
    });
    pesan += `\nTotal: Rp${total.toLocaleString('id-ID')}\n\nMetode Pembayaran: ${paymentMethod}\nAlamat / catatan: `;
    const wa = 'https://wa.me/6281212629516?text=' + encodeURIComponent(pesan);
    window.open(wa, '_blank');

    cart = [];
    saveCart();
    renderCartPanel();
    cartPanel.style.display = 'none';
  });

  // Inisialisasi saat halaman dibuka
  renderMenu();
  renderCartCount();
</script>
