<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cilok Goang Teh Desi â€” Pesan Online</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
    :root {
      --primary: #ff5722;
      --accent: #25d366;
      --bg: #fff5f5;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      background: var(--bg);
      color: #222;
    }
    header {
      background: var(--primary);
      color: #fff;
      padding: 18px 12px;
      text-align: center;
    }
    header .brand { display: flex; gap: 12px; align-items: center; justify-content: center; }
    header img.logo {
      height: 56px; width: 56px;
      border-radius: 8px;
      object-fit: cover;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    header h1 { margin: 0; font-size: 1.4rem; }
    header p { margin: 6px 0 0; font-size: 0.95rem; opacity: 0.95; }

    .container { max-width: 1100px; margin: 18px auto; padding: 0 16px; }

    /* Menu */
    .menu { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 18px; }
    .card {
      background: #fff;
      border-radius: 10px;
      padding: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      text-align: center;
      transition: transform .18s;
    }
    .card:hover { transform: translateY(-6px); }
    .card img { width: 100%; height: 150px; object-fit: cover; border-radius: 8px; }
    .card h3 { margin: 8px 0 4px; font-size: 1.05rem; color: var(--primary); }
    .desc { font-size: 0.9rem; color: #555; margin-bottom: 6px; min-height: 40px; }
    .price { font-weight: 600; margin-bottom: 8px; }
    .card button {
      background: var(--primary);
      color: #fff;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }
    .card button:hover { background: #e64a19; }

    /* Keranjang */
    .cart-float {
      position: fixed;
      right: 18px;
      top: 18px;
      width: 56px;
      height: 56px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.18);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 999;
    }
    .cart-float .badge {
      position: absolute;
      top: -6px;
      right: -6px;
      background: var(--primary);
      color: #fff;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 12px;
    }

    .cart-panel {
      position: fixed;
      right: 18px;
      top: 86px;
      width: 330px;
      max-height: 70vh;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      overflow: auto;
      padding: 14px;
      z-index: 999;
      display: none;
    }
    .cart-item { display: flex; gap: 8px; align-items: center; padding: 8px; border-bottom: 1px dashed #eee; }
    .cart-item:last-child { border-bottom: none; }
    .cart-item .name { flex: 1; font-weight: 600; }
    .cart-item .qty { display: flex; gap: 6px; align-items: center; }
    .cart-item button.small { background: #eee; border: none; padding: 6px 8px; border-radius: 6px; cursor: pointer; }

    .cart-actions { display: flex; gap: 8px; margin-top: 10px; }
    .cart-actions button { flex: 1; padding: 10px; border-radius: 8px; border: none; cursor: pointer; font-weight: 700; }
    .btn-checkout { background: var(--accent); color: #fff; }
    .btn-clear { background: #f2f2f2; }

    /* Popup struk */
    .receipt-popup {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: none; align-items: center; justify-content: center;
      z-index: 1000;
    }
    .receipt {
      background: #fff; border-radius: 10px;
      padding: 20px; width: 350px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      text-align: center;
    }
    .receipt img { width: 80px; border-radius: 10px; margin-bottom: 10px; }
    .receipt h3 { margin: 6px 0; color: var(--primary); }
    .receipt table { width: 100%; text-align: left; font-size: 0.9rem; margin-top: 10px; }
    .receipt table td { padding: 4px 0; }
    .receipt .total { font-weight: bold; border-top: 1px dashed #aaa; margin-top: 10px; padding-top: 6px; }
    .receipt button {
      margin-top: 10px;
      padding: 8px 12px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: var(--accent);
      color: #fff;
      font-weight: 600;
    }
    .receipt button:hover { background: #20b358; }

  </style>
</head>
<body>

<header>
  <div class="brand">
    <img class="logo" src="images/placeholder_menu.jpg" alt="Logo Cilok">
    <div>
      <h1>Cilok Goang Teh Desi</h1>
      <p>Rasa Juara, Pedasnya Bikin Nagih ðŸ”¥</p>
    </div>
  </div>
</header>

<div class="container">
  <h2 style="color:var(--primary);text-align:center;margin-top:18px">Menu Unggulan</h2>
  <div class="menu" id="menuList"></div>
</div>

<!-- Keranjang -->
<div class="cart-float" id="cartBtn" title="Lihat Keranjang">
  ðŸ›’<div class="badge" id="cartCount">0</div>
</div>

<div class="cart-panel" id="cartPanel">
  <h3>Keranjang Anda</h3>
  <div id="cartItems"></div>
  <div class="cart-summary" id="cartTotal">Total: Rp0</div>
  <div class="cart-actions">
    <button class="btn-clear" id="clearCart">Kosongkan</button>
    <button class="btn-checkout" id="checkoutBtn">Checkout</button>
  </div>
</div>

<!-- Popup Struk -->
<div class="receipt-popup" id="receiptPopup">
  <div class="receipt" id="receiptContent">
    <img src="images/placeholder_menu.jpg" alt="Logo">
    <h3>Cilok Goang Teh Desi</h3>
    <table id="receiptTable"></table>
    <div class="total" id="receiptTotal"></div>
    <p>ðŸ”¥ Terima kasih sudah belanja di Cilok Goang Teh Desi! ðŸ”¥</p>
    <button onclick="window.print()">Cetak Struk</button>
  </div>
</div>

<script>
const MENU = [
  { id:'m1', name:'Cilok Goang Tulang', desc:'Isi tulang muda empuk dengan kuah pedas nikmat.', price:17000, img:'images/placeholder_menu.jpg' },
  { id:'m2', name:'Cilok Goang Tofu Sehah', desc:'Cilok lembut dengan tofu gurih dan sambal khas.', price:16000, img:'images/placeholder_menu.jpg' },
  { id:'m3', name:'Cilok Granat', desc:'Cilok isi sambal pedas meledak di mulut.', price:14000, img:'images/placeholder_menu.jpg' },
  { id:'m4', name:'Cilok Kuah Sambal Ijo', desc:'Kuah sambal ijo segar dengan aroma khas.', price:14000, img:'images/placeholder_menu.jpg' },
  { id:'m5', name:'Cilok Goang Ceker Sambal Ijo', desc:'Ceker empuk berpadu cilok kenyal dengan sambal ijo.', price:17000, img:'images/placeholder_menu.jpg' }
];

let cart = JSON.parse(localStorage.getItem('cg_cart')||'[]');
const rupiah = n => 'Rp' + n.toLocaleString('id-ID');
const saveCart = ()=>localStorage.setItem('cg_cart', JSON.stringify(cart));

const menuList=document.getElementById('menuList');
function renderMenu(){
  menuList.innerHTML='';
  MENU.forEach(it=>{
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`
      <img src="${it.img}" alt="${it.name}">
      <h3>${it.name}</h3>
      <p class="desc">${it.desc}</p>
      <div class="price">${rupiah(it.price)}</div>
      <button onclick="addToCart('${it.id}')">Tambah ke Keranjang</button>
    `;
    menuList.appendChild(div);
  });
}
renderMenu();

function addToCart(id){
  const item=MENU.find(m=>m.id===id);
  const found=cart.find(c=>c.id===id);
  if(found) found.qty++; else cart.push({...item,qty:1});
  saveCart(); renderCartPanel(); showCartPanel();
}

const cartBtn=document.getElementById('cartBtn');
const cartPanel=document.getElementById('cartPanel');
const cartItemsEl=document.getElementById('cartItems');
const cartTotalEl=document.getElementById('cartTotal');
cartBtn.onclick=()=>{cartPanel.style.display=cartPanel.style.display==='block'?'none':'block';};
function renderCartPanel(){
  cartItemsEl.innerHTML='';
  let total=0;
  cart.forEach((it,i)=>{
    total+=it.price*it.qty;
    cartItemsEl.innerHTML+=`
      <div class="cart-item">
        <div class="name">${it.name}</div>
        <div>
          ${rupiah(it.price)}<br>
          <div class="qty">
            <button class="small" onclick="changeQty(${i},-1)">-</button>
            <span>${it.qty}</span>
            <button class="small" onclick="changeQty(${i},1)">+</button>
          </div>
        </div>
      </div>`;
  });
  cartTotalEl.textContent='Total: '+rupiah(total);
  document.getElementById('cartCount').textContent=cart.reduce((a,b)=>a+b.qty,0);
}
function changeQty(i,d){cart[i].qty+=d;if(cart[i].qty<=0)cart.splice(i,1);saveCart();renderCartPanel();}
document.getElementById('clearCart').onclick=()=>{if(confirm('Kosongkan keranjang?')){cart=[];saveCart();renderCartPanel();}};

document.getElementById('checkoutBtn').onclick=function(){
  if(cart.length===0){alert('Keranjang kosong');return;}
  let total=0, tableHTML='';
  cart.forEach(it=>{
    total+=it.price*it.qty;
    tableHTML+=`<tr><td>${it.name} x${it.qty}</td><td style="text-align:right">${rupiah(it.price*it.qty)}</td></tr>`;
  });
  document.getElementById('receiptTable').innerHTML=tableHTML;
  document.getElementById('receiptTotal').textContent='Total: '+rupiah(total);
  document.getElementById('receiptPopup').style.display='flex';
  cart=[];
  saveCart();
  renderCartPanel();
};
</script>

</body>
</html>
